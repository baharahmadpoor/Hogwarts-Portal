from sqlalchemy import create_engine, text, Column, Integer, String, Float
from sqlalchemy.orm import declarative_base, sessionmaker


engin = create_engine("mysql+mysqlconnector://username:password@localhost")

with engin.connect() as conn:
    conn.execute(text("CREATE DATABASE IF NOT EXISTS student_db_final"))
    # print("Database recreated")

engin = create_engine("mysql+mysqlconnector://username:password@localhost/student_db_final")

Base = declarative_base()

RobotFactory = sessionmaker(bind=engin)


class Student(Base):
    __tablename__ = "students"

    id = Column(Integer, primary_key=True, autoincrement=True)
    firstname = Column(String(50), nullable=False)
    lastname = Column(String(50), nullable=False)
    house = Column(String(50), nullable=False)
    birth_date = Column(String(50), nullable=False)
    score = Column(Float, nullable=False)

    def __str__(self):
        return f"[{self.firstname}, {self.lastname}, {self.birth_date}, {self.score}, {self.house}]"

    def __repr__(self):
        return f"<Student(id={self.id}, firstname={self.firstname}, lastname={self.lastname}, " \
               f"birth_date={self.birth_date}, score={self.score}, house={self.house})> "


Base.metadata.create_all(engin)
